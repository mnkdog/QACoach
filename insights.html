<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quality Engineering Insights | QA Coach | Stephen Brown</title>
    <meta name="description" content="Practical thoughts and experiences from over 25 years in quality engineering leadership.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        
        .bg-primary {
            background-color: #0F172A;
        }
        
        .accent {
            color: #3B82F6;
        }
        
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #3B82F6, transparent);
        }
        
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .nav-item {
            position: relative;
            display: inline-block;
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            width: 100%;
            transform: scaleX(0);
            height: 2px;
            bottom: -2px;
            left: 0;
            background-color: #3B82F6;
            transform-origin: bottom right;
            transition: transform 0.25s ease-out;
        }
        
        .nav-item:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }

        .insight-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        
        .insight-content.expanded {
            max-height: 5000px;
        }
        
        .collapse-btn {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .collapse-btn.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .preview-fade {
            position: relative;
        }
        
        .preview-fade::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 20px;
            width: 100%;
            background: linear-gradient(transparent, white);
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">
    <!-- Navigation -->
    <header class="fixed w-full z-50 bg-white shadow-sm transition-all duration-300" id="header">
        <div class="container mx-auto px-4 md:px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-2xl font-bold flex items-center space-x-2">
                    <span class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white">QA</span>
                    <span>Coach</span>
                </a>
                
                <nav class="hidden md:flex space-x-8">
                    <a href="index.html#philosophy" class="nav-item font-medium">Philosophy</a>
                    <a href="index.html#transformation" class="nav-item font-medium">Transformation</a>
                    <a href="index.html#leadership" class="nav-item font-medium">Leadership</a>
                    <a href="index.html#about" class="nav-item font-medium">About</a>
                    <a href="insights.html" class="accent font-semibold">Insights</a>
                    <a href="index.html#contact" class="nav-item font-medium">Contact</a>
                </nav>
                
                <button class="md:hidden" id="menuToggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden hidden" id="mobileMenu">
            <div class="px-4 py-5 space-y-4 shadow-inner bg-gray-50">
                <a href="index.html#philosophy" class="block font-medium">Philosophy</a>
                <a href="index.html#transformation" class="block font-medium">Transformation</a>
                <a href="index.html#leadership" class="block font-medium">Leadership</a>
                <a href="index.html#about" class="block font-medium">About</a>
                <a href="insights.html" class="block accent font-semibold">Insights</a>
                <a href="index.html#contact" class="block font-medium">Contact</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative bg-primary text-white pt-32 pb-20 md:pt-40 md:pb-28">
        <div class="container mx-auto px-4 md:px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6">
                    Quality Engineering <span class="accent">Insights</span>
                </h1>
                <p class="text-xl md:text-2xl text-gray-300 mb-8">
                    Practical thoughts and experiences from over 25 years in quality engineering leadership.
                </p>
                <div class="section-divider w-24 mx-auto"></div>
            </div>
        </div>
    </section>

    <!-- Insights Content -->
    <section class="py-20 md:py-28 -mt-16">
        <div class="container mx-auto px-4 md:px-6">
            <div class="max-w-4xl mx-auto">
                
                <!-- Insights Grid -->
                <div class="space-y-8" id="insightsContainer">
                    <!-- Insights will be loaded here by JavaScript -->
                </div>
                
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-primary text-white py-12">
        <div class="container mx-auto px-4 md:px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <a href="index.html" class="text-2xl font-bold flex items-center space-x-2">
                        <span class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white">QA</span>
                        <span>Coach</span>
                    </a>
                </div>
                
                <div class="flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8">
                    <a href="index.html#philosophy" class="text-gray-300 hover:text-white transition">Philosophy</a>
                    <a href="index.html#transformation" class="text-gray-300 hover:text-white transition">Transformation</a>
                    <a href="index.html#leadership" class="text-gray-300 hover:text-white transition">Leadership</a>
                    <a href="index.html#about" class="text-gray-300 hover:text-white transition">About</a>
                    <a href="insights.html" class="text-gray-300 hover:text-white transition">Insights</a>
                    <a href="index.html#contact" class="text-gray-300 hover:text-white transition">Contact</a>
                </div>
                
                <div class="mt-6 md:mt-0 flex space-x-4">
                    <a href="https://www.linkedin.com/in/smb123/" target="_blank" class="text-gray-300 hover:text-white transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                        </svg>
                    </a>
                    <a href="https://twitter.com/" target="_blank" class="text-gray-300 hover:text-white transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path>
                        </svg>
                    </a>
                </div>
            </div>
            
            <div class="mt-10 pt-8 border-t border-gray-800 text-center text-gray-400 text-sm">
                <p>&copy; 2025 QA Coach. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
   <!-- JavaScript -->
    <script>
        // Insight posts configuration - just filenames!
        const insights = [
            'insights/three-approaches-to-qa.md',
            'insights/sdet-trap.md',
            'insights/qa-silo-failing-strategy.md',
            'insights/more-sdets-backlog.md',
            'insights/breaking-down-role-boundaries.md',
            'insights/testers-struggle-become-quality-consultants.md',
            'insights/confidence-hurdle-to-collaborative-qa.md',
            'insights/horizontal-functions-teams-cause-problems.md',
            'insights/business-value-quality.md',
            'insights/qa-crutch-manifesto.md'
            // Add new posts here (newest at top)
        ];

        // Generate URL-friendly slug from title
        function createSlug(title) {
            return title.toLowerCase()
                .replace(/[^\w\s-]/g, '') // Remove special chars
                .replace(/\s+/g, '-') // Replace spaces with hyphens
                .replace(/-+/g, '-') // Replace multiple hyphens with single
                .trim();
        }

        // Get insight index from slug
        function getInsightFromSlug(slug) {
            const insights = window.insightData || [];
            return insights.findIndex(insight => insight.slug === slug);
        }
        function parseMarkdown(markdown) {
            // First handle code blocks to avoid processing markdown inside them
            const codeBlocks = [];
            let codeBlockIndex = 0;
            
            markdown = markdown.replace(/```[\s\S]*?```/g, function(match) {
                const placeholder = `__CODE_BLOCK_${codeBlockIndex}__`;
                codeBlocks[codeBlockIndex] = match;
                codeBlockIndex++;
                return placeholder;
            });
            
            // Process markdown
            let html = markdown
                // Headers (order matters - larger headers first)
                .replace(/^### (.*$)/gm, '<h3 class="text-xl font-semibold mb-3 mt-6">$1</h3>')
                .replace(/^## (.*$)/gm, '<h2 class="text-2xl font-bold mb-4 mt-8">$1</h2>')
                .replace(/^# (.*$)/gm, '<h1 class="text-3xl font-bold mb-6">$1</h1>')
                
                // Bold and italic
                .replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>')
                .replace(/\*(.*?)\*/g, '<em class="italic">$1</em>')
                
                // Links
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" class="text-blue-600 hover:text-blue-800 underline">$1</a>')
                
                // Convert line breaks to proper paragraphs
                .split('\n\n')
                .map(paragraph => {
                    paragraph = paragraph.trim();
                    if (!paragraph) return '';
                    
                    // Check if it's already a header (after header processing)
                    if (paragraph.startsWith('<h')) {
                        return paragraph;
                    }
                    
                    // Check if it's a raw header that needs processing
                    if (/^#{1,3}\s/.test(paragraph)) {
                        return paragraph; // Let it be processed by header regex
                    }
                    
                    // Check if it's a list - handle mixed content
                    const lines = paragraph.split('\n');
                    const hasListItems = lines.some(line => /^[-*+•]\s/.test(line.trim()));
                    
                    if (hasListItems) {
                        let result = '';
                        let listItems = [];
                        
                        lines.forEach(line => {
                            line = line.trim();
                            if (/^[-*+•]\s/.test(line)) {
                                // It's a list item
                                listItems.push(line.replace(/^[-*+•]\s/, ''));
                            } else if (line && listItems.length === 0) {
                                // It's text before the list
                                result += `<p class="text-gray-700 mb-4 leading-relaxed">${line}</p>`;
                            }
                        });
                        
                        // Add the list if we have items
                        if (listItems.length > 0) {
                            const listHtml = listItems
                                .map(item => `<li class="mb-2">${item}</li>`)
                                .join('');
                            result += `<ul class="list-disc pl-6 mb-4 space-y-2">${listHtml}</ul>`;
                        }
                        
                        return result;
                    }
                    
                    // Regular paragraph
                    return `<p class="text-gray-700 mb-4 leading-relaxed">${paragraph}</p>`;
                })
                .join('');
            
            // Restore code blocks
            codeBlocks.forEach((block, index) => {
                const placeholder = `__CODE_BLOCK_${index}__`;
                const code = block.replace(/```(\w+)?\n?([\s\S]*?)```/g, 
                    '<pre class="bg-gray-100 p-4 rounded-lg mb-4 overflow-x-auto"><code>$2</code></pre>');
                html = html.replace(placeholder, code);
            });
            
            return `<div class="prose max-w-none">${html}</div>`;
        }

        // Load insights from markdown files
        async function loadInsights() {
            const container = document.getElementById('insightsContainer');
            window.insightData = []; // Store insight data for URL routing
            
            for (let i = 0; i < insights.length; i++) {
                const insightFile = insights[i];
                
                try {
                    const response = await fetch(insightFile);
                    const markdown = await response.text();
                    
                    // Split into lines and get title and preview
                    const lines = markdown.trim().split('\n');
                    const title = lines[0].replace(/^# /, ''); // Remove # from title
                    const slug = createSlug(title);
                    const contentLines = lines.slice(2); // Skip title and empty line
                    
                    // Store insight data
                    window.insightData.push({ title, slug, index: i });
                    
                    // Create preview from first few paragraphs
                    const previewText = contentLines.slice(0, 10).join('\n');
                    const previewHtml = parseMarkdown(previewText);
                    const preview = previewHtml.replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim().substring(0, 400) + '...';
                    
                    const fullContent = parseMarkdown(contentLines.join('\n'));
                    
                    // Create insight card
                    const insightHtml = `
                        <article class="card bg-white rounded-xl shadow-md overflow-hidden" data-insight="${i}" data-slug="${slug}">
                            <div class="p-8 md:p-10">
                                <h3 class="text-4xl font-bold mb-4 cursor-pointer hover:text-blue-600 transition duration-300" onclick="toggleInsight(${i})">
                                    ${title}
                                </h3>
                                
                                <div class="insight-preview preview-fade">
                                    <p class="text-gray-700 mb-6 leading-relaxed">${preview}</p>
                                </div>
                                
                                <div class="insight-content" id="content-${i}">
                                    ${fullContent}
                                    <div class="mt-6 pt-4 border-t border-gray-200">
                                        <p class="text-sm text-gray-500 mb-3">Share this post:</p>
                                        <button onclick="copyShareLink('${slug}')" class="inline-flex items-center text-blue-600 font-medium hover:text-blue-800 transition duration-300 mr-4">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                            </svg>
                                            Copy link
                                        </button>
                                    </div>
                                    <button onclick="collapseInsight(${i})" class="collapse-btn mt-6 inline-flex items-center text-blue-600 font-medium hover:text-blue-800 transition duration-300">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
                                        </svg>
                                        Collapse
                                    </button>
                                </div>
                                
                                <div class="flex justify-start mt-6">
                                    <button onclick="toggleInsight(${i})" class="read-more-btn inline-flex items-center text-blue-600 font-medium hover:text-blue-800 transition duration-300">
                                        Read more
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </article>
                    `;
                    
                    container.innerHTML += insightHtml;
                    
                } catch (error) {
                    console.error(`Error loading ${insightFile}:`, error);
                }
            }
            
            // Check for URL hash on load
            checkUrlHash();
        }

        // Toggle insight expansion
        function toggleInsight(index) {
            // Update URL hash
            const slug = window.insightData[index].slug;
            window.history.pushState(null, null, `#${slug}`);
            
            // Collapse any other expanded insights
            const allContents = document.querySelectorAll('.insight-content');
            const allPreviews = document.querySelectorAll('.insight-preview');
            const allReadMoreBtns = document.querySelectorAll('.read-more-btn');
            const allCollapseBtns = document.querySelectorAll('.collapse-btn');
            
            allContents.forEach((content, i) => {
                if (i !== index) {
                    content.classList.remove('expanded');
                    allPreviews[i].style.display = 'block';
                    allReadMoreBtns[i].style.display = 'flex';
                    allCollapseBtns[i].classList.remove('visible');
                }
            });
            
            // Toggle the clicked insight
            const content = document.getElementById(`content-${index}`);
            const preview = allPreviews[index];
            const readMoreBtn = allReadMoreBtns[index];
            const collapseBtn = allCollapseBtns[index];
            
            if (content.classList.contains('expanded')) {
                return; // Don't collapse on title click if already expanded
            } else {
                content.classList.add('expanded');
                preview.style.display = 'none';
                readMoreBtn.style.display = 'none';
                setTimeout(() => {
                    collapseBtn.classList.add('visible');
                }, 300);
                
                // Wait for all animations to complete, then position instantly
                setTimeout(() => {
                    const targetArticle = document.querySelector(`[data-insight="${index}"]`);
                    const headerHeight = document.getElementById('header').offsetHeight;
                    const scrollPosition = targetArticle.offsetTop - headerHeight - 20;
                    
                    // Instant scroll - no smooth behavior to avoid the "fruit machine" effect
                    window.scrollTo(0, scrollPosition);
                }, 600);
            }
        }

        // Collapse specific insight
        function collapseInsight(index) {
            // Clear URL hash
            window.history.pushState(null, null, window.location.pathname);
            
            const content = document.getElementById(`content-${index}`);
            const preview = document.querySelectorAll('.insight-preview')[index];
            const readMoreBtn = document.querySelectorAll('.read-more-btn')[index];
            const collapseBtn = document.querySelectorAll('.collapse-btn')[index];
            
            content.classList.remove('expanded');
            collapseBtn.classList.remove('visible');
            setTimeout(() => {
                preview.style.display = 'block';
                readMoreBtn.style.display = 'flex';
            }, 300);
        }

        // Copy share link to clipboard
        function copyShareLink(slug) {
            const url = `${window.location.origin}${window.location.pathname}#${slug}`;
            navigator.clipboard.writeText(url).then(() => {
                // Show temporary success message
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    Copied!
                `;
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }

        // Check URL hash and expand corresponding post
        function checkUrlHash() {
            const hash = window.location.hash.slice(1); // Remove #
            if (hash && window.insightData) {
                const index = window.insightData.findIndex(insight => insight.slug === hash);
                if (index !== -1) {
                    toggleInsight(index);
                }
            }
        }

        // Handle browser back/forward buttons
        window.addEventListener('popstate', checkUrlHash);

        // Mobile menu toggle
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Shrink header on scroll
        const header = document.getElementById('header');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('py-2');
                header.classList.remove('py-4');
            } else {
                header.classList.add('py-4');
                header.classList.remove('py-2');
            }
        });
        
        // Close mobile menu when clicking a link
        const mobileLinks = mobileMenu.querySelectorAll('a');
        
        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Load insights when page loads
        document.addEventListener('DOMContentLoaded', loadInsights);
    </script>
</body>
</html>
